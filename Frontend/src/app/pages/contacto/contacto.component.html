<main>
    <div class="container-form">
<div class="container my-5">
    <div class="card p-4 shadow text-secondary">
        <p class="text-center">
            Estamos ac√° para vos. Si tienes alguna pregunta, comentario o simplemente deseas hablar sobre tu libro favorito, no dudes en ponerte en contacto con nosotros. 
            Estamos emocionados por compartir este viaje literario contigo.
        </p>
        <p class="text-center fw-bold">
            Gracias por elegir a <b>MercadoLibro</b> como tu destino literario. Juntos, exploraremos las p√°ginas de historias inolvidables y crearemos recuerdos literarios que perdurar√°n para siempre.
        </p>
    </div>

    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card p-3 shadow bg-light">
                <h5 class="text-center fw-bold text-primary">Datos de contacto</h5>
                <ul class="list-unstyled text-center">
                    <li><i class="bi bi-whatsapp text-success me-2"></i> {{datosContacto[0].telefono}}</li>
                    <li><i class="bi bi-geo text-danger me-2"></i> {{datosContacto[1].ubicacion}}</li>
                    <li>
                        <a href="{{datosContacto[2].facebook}}" target="_blank" class="text-decoration-none">
                            <i class="bi bi-facebook text-primary me-2"></i> Facebook
                        </a>
                    </li>
                    <li>
                        <a href="{{datosContacto[3].instagram}}" target="_blank" class="text-decoration-none">
                            <i class="bi bi-instagram text-danger me-2"></i> Instagram
                        </a>
                    </li>
                    <li>
                        <a href="{{datosContacto[4].twitter}}" target="_blank" class="text-decoration-none">
                            <i class="bi bi-twitter text-info me-2"></i> Twitter
                        </a>
                    </li>
                    <li>
                        <a href="{{datosContacto[5].linkedin}}" target="_blank" class="text-decoration-none">
                            <i class="bi bi-linkedin text-primary me-2"></i> LinkedIn
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="col-md-6 text-center">
            <div class="card shadow bg-light">
                <div class="card-body">
                    <h5 class="fw-bold text-primary">Ubicaci√≥n</h5>
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d6810.162386358719!2d-64.188053!3d-31.411889!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94329878c0a6ed7b%3A0x8bf3fafe13a10e62!2sAv.%20Col%C3%B3n%20350%2C%20X5022%20C%C3%B3rdoba!5e0!3m2!1ses!2sar!4v1693860118832!5m2!1ses!2sar" 
                        width="100%" height="200" style="border:0;" allowfullscreen="" loading="lazy">
                    </iframe>
                </div>
            </div>
        </div>
    </div>
        </div>

        <div class="contact-form-container">
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">Cont√°ctanos</h2>
      <p class="card-description">Complete el formulario a continuaci√≥n para ponerte en contacto. ¬°Nos encantar√≠a saber de ti!</p>
    </div>
    <div class="card-content">
      <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <!-- Name Field -->
        <div class="form-item">
          <label for="name" class="form-label">Nombre</label>
          <div class="input-group">
            <span class="input-icon">üë§</span>
            <input id="name" type="text" formControlName="name" placeholder="Tu Nombre" class="form-input pl-10"
                   [ngClass]="{'input-error': name?.invalid && (name?.dirty || name?.touched)}">
          </div>
          <div *ngIf="name?.invalid && (name?.dirty || name?.touched)" class="form-message-error">
            <div *ngIf="name?.errors?.['required']">El nombre es requerido.</div>
            <div *ngIf="name?.errors?.['minlength']">El nombre debe tener al menos 2 caracteres.</div>
            <div *ngIf="name?.errors?.['maxlength']">El nombre debe tener como m√°xmimo 50 caracteress.</div>
          </div>
        </div>

        <!-- Email Field -->
        <div class="form-item">
          <label for="email" class="form-label">Email</label>
           <div class="input-group">
            <span class="input-icon">üìß</span>
            <input id="email" type="email" formControlName="email" placeholder="your.email@example.com" class="form-input pl-10"
                   [ngClass]="{'input-error': email?.invalid && (email?.dirty || email?.touched)}">
          </div>
          <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="form-message-error">
            <div *ngIf="email?.errors?.['required']">El email es requerido.</div>
            <div *ngIf="email?.errors?.['email']">Por favor, introduzca una direcci√≥n de correo electr√≥nico v√°lida.</div>
          </div>
        </div>

        <!-- Message Field -->
        <div class="form-item">
          <label for="message" class="form-label">Mensaje</label>
          <textarea id="message" formControlName="message" placeholder="Escribe tu mensaje aqu√≠..." class="form-textarea"
                    [ngClass]="{'input-error': message?.invalid && (message?.dirty || message?.touched)}"></textarea>
          <div *ngIf="message?.invalid && (message?.dirty || message?.touched)" class="form-message-error">
            <div *ngIf="message?.errors?.['required']">Se requiere un mensaje.</div>
            <div *ngIf="message?.errors?.['minlength']">El mensaje debe tener al menos 10 caracteres.</div>
            <div *ngIf="message?.errors?.['maxlength']">El mensaje debe tener como m√°ximo 1000 caracteres.</div>
          </div>
        </div>

        <!-- Improvement Description Field -->
        <div class="form-item">
          <label for="improvementDescription" class="form-label">¬øC√≥mo podemos mejorar su mensaje? (Opcional)</label>
          <textarea id="improvementDescription" formControlName="improvementDescription" class="form-textarea"
                    placeholder="por ejemplo, hacerlo m√°s formal, a√±adir un poco de humor, revisar errores gramaticales..."
                    [ngClass]="{'input-error': improvementDescription?.invalid && (improvementDescription?.dirty || improvementDescription?.touched)}"></textarea>
          <p class="form-description">Describe c√≥mo te gustar√≠a que la IA afinara tu mensaje anterior.</p>
          <div *ngIf="improvementDescription?.invalid && (improvementDescription?.dirty || improvementDescription?.touched)" class="form-message-error">
            <div *ngIf="improvementDescription?.errors?.['maxlength']">La descripci√≥n debe tener un m√°ximo de 500 caracteres.</div>
          </div>
        </div>

        <button type="button" (click)="handleImproveMessage()" class="button button-outline full-width"
                [disabled]="isImproving || !improvementDescription?.value || !message?.value">
          <span *ngIf="isImproving" class="spinner"></span>
          <span *ngIf="!isImproving">‚ú®</span>
          Mejorar Mensaje con IA
        </button>

        <!-- CAPTCHA Placeholder -->
        <div class="form-item checkbox-item">
          <input id="isNotRobot" type="checkbox" formControlName="isNotRobot" class="form-checkbox">
          <label for="isNotRobot" class="form-label-checkbox">
            Yo no soy un robot
            <span class="form-description">Ay√∫danos a prevenir el spam.</span>
          </label>
           <div *ngIf="isNotRobot?.invalid && (isNotRobot?.dirty || isNotRobot?.touched)" class="form-message-error">
            <div *ngIf="isNotRobot?.errors?.['required']">Por favor, confirme que no es un robot.</div>
          </div>
        </div>
        
        <!-- Submit Button -->
        <button type="submit" class="button button-primary full-width large-button" [disabled]="isLoading || isImproving || contactForm.invalid">
          <span *ngIf="isLoading" class="spinner"></span>
          <span *ngIf="!isLoading">‚úâÔ∏è</span>
          Enviar Mensaje
        </button>

        <!-- Submission Messages -->
        <div *ngIf="submissionMessage" class="submission-success-message">
          {{ submissionMessage }}
        </div>
        <div *ngIf="submissionError" class="submission-error-message">
          {{ submissionError }}
        </div>
      </form>
    </div>
  </div>
</div>

    </div>
</main>
